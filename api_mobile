1.	Buat Project baru, pastikan project bisa berjalan normal
2.	Buka file build.gradel.kts (module:app) tambahkan di dalam dependecies

    implementation("com.squareup.retrofit2:retrofit:2.9.0")
    implementation("com.squareup.retrofit2:converter-gson:2.9.0")
    implementation("androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.2")
    implementation("androidx.lifecycle:lifecycle-livedata-ktx:2.6.2")
    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3")
    implementation("androidx.recyclerview:recyclerview:1.3.2")
    implementation("androidx.cardview:cardview:1.0.0")


3.	Buka AndroidManifest.xml, tambahkan diatas <application
<uses-permission android:name="android.permission.INTERNET" />

4.	Buat 4 package api, model, repository dan ui
5.	Pada package model buat file Cripto.kt dan file CriptoResponse.kt 
Isi Cripto.kt  (kode package yang sudah ada jangan dihapus)
import com.google.gson.annotations.SerializedName

data class Cripto(
    val id: Int,
    val symbol: String,
    val name: String,
    @SerializedName("price_usd")
    val priceUsd : Double
)
isi CriptoResponse.kt 
data class CriptoResponse(
    val data: List<Cripto>
)

6.	Pada package api buat interface dengan nama ApiService.kt, isinya 
import com.example.criptoapp.model.CriptoResponse
import retrofit2.Response
import retrofit2.http.GET

interface ApiService {
    @GET("api/tickers/")
    suspend fun getCriptoData(): Response<CriptoResponse>
}

7.	Masih di package api buat file RetrofilClient.kt, isinya
import retrofit2.Retrofit
import retrofit2.converter.gson.GsonConverterFactory

object RetrofitClient {
    private const val BASE_URL = "https://api.coinlore.net/"
    val instance: ApiService by lazy {
        val retrofit = Retrofit.Builder()
            .baseUrl(BASE_URL)
            .addConverterFactory(GsonConverterFactory.create())
            .build()
        retrofit.create(ApiService::class.java)
    }
}

8.	Pada package repository buat file CriptoRepository.kt, isinya
import com.example.criptoapp.api.ApiService
import com.example.criptoapp.model.Cripto

class CriptoRepository (private val apiService: ApiService){
    suspend fun getCriptoItems(): List<Cripto> {
        val response = apiService.getCriptoData()

        if (response.isSuccessful) {
            return response.body()?.data
                ?: throw Exception("Data kosong")
        } else {
            throw Exception("Gagal memuat data: ${response.code()}")
        }
    }
}

9.	Klik kanan pada package ui, kemudian buat package baru bernama adapter, hasilnya
 
10.	Di dalam adapter buat file baru bernama CriptoAdapter.kt, isinya


class CriptoAdapter(
    private val items: MutableList<Cripto> = mutableListOf()
) : RecyclerView.Adapter<CriptoAdapter.CriptoViewHolder>() {

    private val usdFormatter = NumberFormat.getCurrencyInstance(Locale.US)

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CriptoViewHolder {
        val view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_cripto, parent, false)
        return CriptoViewHolder(view)
    }

    override fun onBindViewHolder(holder: CriptoViewHolder, position: Int) {
        holder.bind(items[position])
    }

    override fun getItemCount(): Int = items.size

    fun submitData(data: List<Cripto>) {
        items.clear()
        items.addAll(data)
        notifyDataSetChanged()
    }

    inner class CriptoViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {

        private val tvName: TextView = itemView.findViewById(R.id.text_name)
        private val tvSymbol: TextView = itemView.findViewById(R.id.text_symbol)
        private val tvPriceUsd: TextView = itemView.findViewById(R.id.text_price_usd)

        fun bind(item: Cripto) {
            tvName.text = item.name
            tvSymbol.text = item.symbol
            tvPriceUsd.text = usdFormatter.format(item.priceUsd)
        }
    }
}

11.	Selanjutnya pada res -> drawable klik kanan pilih new -> drawable resource file, beri nama ic_refresh, klik ok, lalu didalamnya isi 
<vector xmlns:android="http://schemas.android.com/apk/res/android" android:height="24dp" android:tint="#000000" android:viewportHeight="24" android:viewportWidth="24" android:width="24dp">

    <path android:fillColor="@android:color/white" android:pathData="M17.65,6.35C16.2,4.9 14.21,4 12,4c-4.42,0 -7.99,3.58 -7.99,8s3.57,8 7.99,8c3.73,0 6.84,-2.55 7.73,-6h-2.08c-0.82,2.33 -3.04,4 -5.65,4 -3.31,0 -6,-2.69 -6,-6s2.69,-6 6,-6c1.66,0 3.14,0.69 4.22,1.78L13,11h7V4l-2.35,2.35z"/>

</vector>

12.	Buat Menu Toolbar: Klik kanan res > New > Android Resource File. Beri nama menu_toolbar dengan tipe Menu. Tambahkan kode ini:
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <item
    	android:id="@+id/action_refresh"
    	android:title="Refresh"
    	app:showAsAction="never" />

</menu>

13.	Pada bagian layout klik kanan pilih new lalu pilih layout resource file, beri nama item_cripto.xml, lalu isi
<!-- File: res/layout/item_weather.xml -->
<com.google.android.material.card.MaterialCardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginHorizontal="8dp"
    android:layout_marginVertical="4dp"
    app:cardCornerRadius="12dp"
    app:cardElevation="4dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:padding="16dp">

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical">

            <TextView
                android:id="@+id/text_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?attr/textAppearanceBodyLarge"
                android:textStyle="bold"
                tools:text="Bitcoins" />

            <TextView
                android:id="@+id/text_symbol"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="4dp"
                android:textAppearance="?attr/textAppearanceBodyMedium"
                tools:text="BTC" />

        </LinearLayout>
        <TextView
            android:id="@+id/text_price_usd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?attr/textAppearanceBodyMedium"
            tools:text="$5000.000" />
    </LinearLayout>
</com.google.android.material.card.MaterialCardView>

14.	Kemudian buka file activity_main.xml, samakan isinya
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">
    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/app_bar_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:layout_constraintTop_toTopOf="parent">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            app:title="Kripto"
            app:menu="@menu/menu_toolbar"/>

    </com.google.android.material.appbar.AppBarLayout>

    <ProgressBar
        android:id="@+id/progress_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:visibility="gone"
        tools:visibility="visible"/>

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_view_weather"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintTop_toBottomOf="@id/app_bar_layout"
        app:layout_constraintBottom_toTopOf="@id/button_load_more"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        tools:listitem="@layout/item_cripto"/>

    <Button
        android:id="@+id/button_load_more"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Muat Lebih Banyak"
        android:visibility="gone"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginBottom="16dp"
        style="@style/Widget.Material3.Button.OutlinedButton"/>

    <TextView
        android:id="@+id/text_view_error"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Terjadi kesalahan."
        android:textSize="16sp"
        android:visibility="gone"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />


</androidx.constraintlayout.widget.ConstraintLayout>

15.	Buka file MainActivity.kt samakan isinya

class MainActivity : AppCompatActivity() {

    private lateinit var toolbar: MaterialToolbar
    private lateinit var recyclerView: RecyclerView
    private lateinit var progressBar: ProgressBar
    private lateinit var buttonLoadMore: Button
    private lateinit var errorTextView: TextView

    private lateinit var criptoAdapter: CriptoAdapter
    private lateinit var repository: CriptoRepository

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        initView()
        setupToolbar()
        setupRecyclerView()
        setupRepository()
        fetchCriptoData()
    }

    private fun initView() {
        toolbar = findViewById(R.id.toolbar)
        recyclerView = findViewById(R.id.recycler_view_weather)
        progressBar = findViewById(R.id.progress_bar)
        buttonLoadMore = findViewById(R.id.button_load_more)
        errorTextView = findViewById(R.id.text_view_error)
    }

    private fun setupToolbar() {
        setSupportActionBar(toolbar)
        supportActionBar?.title = "Kripto"
    }

    override fun onCreateOptionsMenu(menu: Menu?): Boolean {
        menuInflater.inflate(R.menu.menu_toolbar, menu)
        return true
    }

    override fun onOptionsItemSelected(item: MenuItem): Boolean {
        return when (item.itemId) {
            R.id.action_refresh -> {
                fetchCriptoData()
                true
            }
            else -> super.onOptionsItemSelected(item)
        }
    }

    private fun setupRecyclerView() {
        criptoAdapter = CriptoAdapter()
        recyclerView.layoutManager = LinearLayoutManager(this)
        recyclerView.adapter = criptoAdapter
    }

    private fun setupRepository() {
        val apiService: ApiService = RetrofitClient.instance
        repository = CriptoRepository(apiService)
    }
    private fun fetchCriptoData() {
        // TAMPILKAN LOADING DULU
        progressBar.visibility = View.VISIBLE
        recyclerView.visibility = View.GONE
        errorTextView.visibility = View.GONE

        lifecycleScope.launch {
            try {
                val data = repository.getCriptoItems()
                criptoAdapter.submitData(data)

                recyclerView.visibility = View.VISIBLE
                buttonLoadMore.visibility = View.GONE
            } catch (e: Exception) {
                showError(e.message ?: "Terjadi kesalahan")
            } finally {
                // SEMBUNYIKAN LOADING SETELAH SELESAI
                progressBar.visibility = View.GONE
            }
        }
    }
    private fun showError(message: String) {
        recyclerView.visibility = View.GONE
        progressBar.visibility = View.GONE
        errorTextView.text = message
        errorTextView.visibility = View.VISIBLE
    }



16.	Tes running aplikasi, pastikan laptop terkoneksi internet (wifi)



